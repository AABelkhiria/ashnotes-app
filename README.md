# Note-Taking App

This project is a full-stack note-taking application that uses a GitHub repository as its storage, providing a Notion-like experience with hierarchical notes.

## Project Structure

The project is a monorepo with the following structure:

-   **/frontend**: Contains the SvelteKit frontend application.
-   **/backend**: Contains the backend application, written in Rust with Axum.
-   **/docs**: Contains additional documentation for the project.

## Getting Started

To get started with this project, you'll need to have Node.js, npm, and Rust installed.

### Installation

1.  **Clone the repository:**
    ```bash
    git clone <repository-url>
    cd note-app
    ```

2.  **Install frontend dependencies:**
    ```bash
    make install
    ```

### Running the Application

To run both the frontend and backend development servers concurrently, use the following command:

```bash
make run
```

The frontend will be available at `http://localhost:5173`, and the backend will be running on port `3000`.

## Available Commands

This project uses a `Makefile` to manage common tasks. Here are some of the most useful commands:

-   `make all`: Build both the frontend and backend.
-   `make run`: Run both the frontend and backend development servers.
-   `make install`: Install frontend dependencies.
-   `make build`: Build both the frontend and backend for production.
-   `make build-frontend`: Build the frontend only.
-   `make build-backend`: Build the backend only.
-   `make run-frontend`: Run the frontend development server.
-   `make run-backend`: Run the backend development server.
-   `make check`: Run static checks on the frontend code.
-   `make test`: Run tests for the backend.
-   `make clean`: Clean the build artifacts for both frontend and backend.
-   `make help`: Show all available commands.

## Documentation

For more detailed documentation, please see the [docs](./docs) directory.

## Continuous Deployment

This project uses GitHub Actions workflows to automate the release and deployment process. When a commit is pushed to the `main` branch, the following workflows are triggered:

### 1. Create Release (`.github/workflows/release.yml`)

This workflow is responsible for building the desktop application, versioning, and creating a new GitHub Release.

-   **Trigger**: Pushes to the `main` branch.
-   **Steps**:
    1.  **Checkout Code**: Fetches the repository code.
    2.  **Setup Node.js & Rust**: Configures the environment with necessary tools for frontend and backend builds.
    3.  **Install Frontend Dependencies**: Installs Node.js packages required for the SvelteKit frontend.
    4.  **Get Latest Tag**: Retrieves the most recent Git tag to determine the current version.
    5.  **Calculate New Version**: Determines the new version number based on the current date and the latest tag. The versioning scheme is `YY.MM.minor`, where `YY` is the year, `MM` is the month, and `minor` is an incremental number that resets to `1` each month for a new month.
    6.  **Update Version in `tauri.conf.json`**: Injects the newly calculated version into the Tauri configuration file.
    7.  **Build Application**: Compiles the desktop application, generating a `.deb` package for Linux.
    8.  **Find Debian Package**: Locates the generated `.deb` file.
    9.  **Create Release and Upload Asset**: Creates a new GitHub Release with the new version tag and uploads the `.deb` package as a release asset.
    10. **Upload .deb as an Artifact**: Uploads the `.deb` package as a workflow artifact for later use.

### 2. Publish to APT Repository (`.github/workflows/publish_apt_repo.yml`)

This workflow is triggered after a successful release and publishes the generated `.deb` package to a Debian APT repository hosted via GitHub Pages.

-   **Trigger**: Depends on the successful completion of the `Create Release` workflow.
-   **Steps**:
    1.  **Checkout Code**: Fetches the repository code.
    2.  **Download Debian Package**: Downloads the `.deb` artifact generated by the `Create Release` workflow.
    3.  **Configure GPG**: Sets up GPG keys for signing the APT repository.
    4.  **Publish to APT**: Uses a custom action to add the `.deb` package to the APT repository and update the repository metadata.
    5.  **Deploy to GitHub Pages**: Pushes the updated APT repository to the `gh-pages` branch, making it accessible via GitHub Pages.
